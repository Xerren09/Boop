<!DOCTYPE html>
<head>
    <title>Boop!</title>
    <link rel="stylesheet" href="/common.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/fontawesome.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/solid.min.css" />
    <script crossorigin src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
</head>
<body>
    <div id="main">
        <div id="content">
            <div id="header">
                <h1>Boop!</h1>
                <p>A lightweight development server for hosting websites and NodeJS apps.</p>
            </div>
            <div id="container">
                <div id="containerHeader">
                    <h2>System</h2>
                </div>
                <p><b>Host system:</b><em> {{ platform }}</em></p>
                <p><b>Node version:</b><em> {{ nodeVersion }}</em></p>
                <p><b>Boop environment:</b><em> {{ nodeEnv }}</em></p>
                <p><b>Started on:</b><em> {{ uptimeStart }}</em></p>
                <p><b>Uptime:</b><em> {{ uptimeString }}</em></p>
                <div class="addressDiv">
                    <p><b>Address:</b><em id="address"> {{ domain }}</em></p>
                    <button class="copy" onclick="copyAddress('address')"><i class="fas fa-copy"></i></button>
                </div>
                <p></p>
            </div>
            <div id="container">
                <div id="containerHeader">
                    <h2>Hosted projects</h2>
                </div>
                <div id="projects">
                    <!-- List Projects here -->
                </div>
            </div>
        </div>
    </div>
    <script>
        function copyAddress(elementID) {
            var address = document.getElementById(elementID).innerText.toString().trim();
            navigator.clipboard.writeText(address);
        } 
    </script>
    <script type="text/babel">
        const projects = {{ projects }};
        const domain = "{{ domain }}";
        const copy = (elementID) => {
            var address = document.getElementById(elementID).innerText.toString().trim();
            navigator.clipboard.writeText(address);
        };
        function App() {
            return (
                <div>
                {
                    projects.map(element => {
                        return (
                            <div class="projectDivs">
                                <div>
                                    <h2 class="projectTitle">{element.name}</h2>
                                </div>
                                <div>
                                    <p><b>Project GitHub:</b> <em><a target="_blank" href={element.repository.url}> {element.repository.url}</a></em></p>
                                </div>
                                <div class="addressDiv">
                                    <p><b>Project root:</b> <em><a id={element.name} target="_blank" href={domain + "/" + element.name + "/"}> {domain + "/" + element.name + "/"}</a></em></p>
                                    <button class="copy" onClick={()=>{copy(domain + "/" + element.name + "/")}}><i class="fas fa-copy"></i></button>
                                </div>
                                <div class="addressDiv">
                                    <p><b>Project details:</b> <em><a id={element.name+"dat"} target="_blank" href={domain + "/build/" + element.name + "/"}> {domain + "/build/" + element.name + "/"}</a></em></p>
                                    <button class="copy" onClick={()=>{copy(element.name+"dat")}}><i class="fas fa-copy"></i></button>
                                </div>
                            </div>
                        );
                    })
                }
            </div>
            );
        }
        ReactDOM.render(
            <App />,
            document.getElementById('projects')
        );
    </script>
</body>
</html>